<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog - Animalis Care</title>

    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    
    <link rel="preconnect" 
          href="https://fonts.googleapis.com">
    <link rel="preconnect" 
          href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Poppins:wght@400;500;600&display=swap" 
          rel="stylesheet">

    <link rel="stylesheet" href="../css/style.css">
</head>
<body>

    <header class="navbar-container">
        <div class="container">
            <nav class="navbar">
                <a href="../index.html" class="logo">
                    <div class="logo-icon-wrapper">
                        <svg class="logo-icon" 
                             viewBox="0 0 24 24" 
                             fill="currentColor">
                          <path d="M12.89 2.45c-2.32.23-4.52 1.34-6.23 2.89C4.16 7.6 2.52 10.75 2.26 14c-.28 3.5.88 7.02 3.23 9.49 2.5 2.62 5.96 4.01 9.51 3.73s6.94-2.14 8.94-4.94c1.2-1.68 1.9-3.66 2.05-5.68.13-1.84-.38-3.69-1.48-5.26-1.32-1.88-3.26-3.3-5.51-4.04-1.88-.62-3.83-.78-5.74-.53a.75.75 0 01-.69-.82c.07-.4.42-.69.82-.69.15 0 .3 0 .45.02zM8.5 13.75a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5zm2.75-3.5a1.25 1.25 0 10-2.5 0 1.25 1.25 0 002.5 0zm3.5 1.25a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5zm2.75-3.5a1.25 1.25 0 10-2.5 0 1.25 1.25 0 002.5 0z"/></svg>
                    </div>
                    <span class="logo-text">Animalis Care</span>
                </a>
                <div class="nav-menu-desktop">
                    <a href="../index.html" class="nav-link">Home</a>
                    <a href="index.html" class="nav-link active">Blog</a>
                    <a href="../sobre-nos/index.html" class="nav-link">Sobre Nós</a>
                </div>
                <a href="#" class="btn btn-pink btn-desktop">Contato</a>
            </nav>
        </div>
    </header>

    <main id="app-content">
        <div id="page-blog-list" class="page active">
            <section class="section container">
                <div class="section-header">
                    <h1 class="section-title">Nosso Blog</h1>
                    <p class="section-subtitle">Dicas, novidades e tudo sobre o mundo pet para ajudar a cuidar do seu companheiro.</p>
                </div>

                <div class="featured-posts">
                    <h2 class="subsection-title">Em Destaque</h2>
                    <div class="swiper-container featured-swiper">
                        <div class="swiper-wrapper" id="featured-posts-wrapper"></div>
                        <div class="swiper-pagination"></div>
                    </div>
                </div>

                <div class="all-posts">
                    <h2 class="subsection-title">Todas as Publicações</h2>
                    <div id="blog-filters" class="blog-filters"></div>
                    <div id="blog-grid" class="blog-grid"></div>
                </div>
            </section>
        </div>

        <div id="page-post-detail" class="page">
            </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p class="footer-title">ANIMALIS CARE</p>
            <p class="footer-copy">&copy; 2025 Animalis Care. Desenvolvido pelo Squad 2 - EJECT.</p>
        </div>
    </footer>

    <div id="preview-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close-btn" onclick="App.closeModal('preview-modal')">&times;</button>
            <div id="preview-modal-content"></div>
        </div>
    </div>

    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script>
        // // O objeto 'App' organiza toda a nossa lógica para evitar conflitos e manter o código limpo.
        const App = {
            // // Uma base de dados simulada. No projeto final, estes dados virão do Back-End (Django).
            database: {
                blogPosts: [
                    { id: 1, title: '5 Sinais de que o seu Cão pode estar com Dor', author: 'Dra. Ana Sousa', image: 'https://placehold.co/600x400/60B6D3/FFFFFF?text=Cão+Saudável', category: 'Cães', featured: true, content: '<p>A dor em cães pode ser subtil. Fique atento a mudanças de comportamento como falta de apetite, relutância em se mover ou agressividade incomum. Identificar cedo é crucial para o bem-estar do seu amigo.</p><p>Se notar algum destes sinais, não hesite em procurar um veterinário. Um diagnóstico preciso pode fazer toda a diferença no tratamento e na qualidade de vida do seu pet.</p>' },
                    { id: 2, title: 'A importância da Vacinação para Gatos', author: 'Dr. Carlos Andrade', image: 'https://placehold.co/600x400/F4D3D4/9A5C5E?text=Gato+Feliz', category: 'Gatos', featured: true, content: '<p>Manter a vacinação do seu gato em dia é um ato de amor e responsabilidade. As vacinas protegem contra doenças graves e contagiosas. Converse com seu veterinário para criar um calendário de vacinação adequado para o estilo de vida do seu felino.</p>' },
                    { id: 3, title: 'Alimentação Natural: Prós e Contras', author: 'Dra. Ana Sousa', image: 'https://placehold.co/600x400/E58A63/FFFFFF?text=Comida+Pet', category: 'Alimentação', content: '<p>A alimentação natural tem ganhado popularidade, mas é preciso cuidado. Os prós incluem ingredientes frescos e sem conservantes. Os contras envolvem o risco de desbalanceamento nutricional. Consulte sempre um veterinário nutricionista antes de mudar a dieta do seu pet.</p>' },
                    { id: 4, title: 'Arranhadores: Por que todo Gato Precisa de Um', author: 'Dr. Carlos Andrade', image: 'https://placehold.co/600x400/333333/FFFFFF?text=Arranhador', category: 'Gatos', featured: true, content: '<p>Arranhar é um comportamento natural dos gatos. Ajuda a afiar as unhas e a marcar território. Oferecer um arranhador adequado evita que seus móveis se tornem o alvo principal. Existem diversos modelos, descubra qual o seu gato prefere!</p>' },
                ],
            },

            // // Função de inicialização, chamada quando a página carrega.
            init() {
                this.renderBlogPage(); // Renderiza o conteúdo inicial do blog.
            },

            // // Função para navegar entre a lista de posts e o detalhe de um post.
            navigateTo(pageId) {
                document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                document.getElementById(pageId).classList.add('active');
                window.scrollTo(0, 0); // Leva o utilizador para o topo da página.
            },

            // // Renderiza a página principal do blog, com os filtros e os posts.
            renderBlogPage(category = 'Todos') {
                const categories = ['Todos', ...new Set(this.database.blogPosts.map(p => p.category))];
                const featuredPostsHTML = this.database.blogPosts.filter(p => p.featured).map(p => this.createFeaturedPostTemplate(p)).join('');
                const filteredPosts = category === 'Todos' ? this.database.blogPosts : this.database.blogPosts.filter(p => p.category === category);
                const postsHTML = filteredPosts.map(p => this.createBlogCardTemplate(p)).join('');

                // Preenche os containers com o HTML gerado
                document.getElementById('featured-posts-wrapper').innerHTML = featuredPostsHTML;
                document.getElementById('blog-filters').innerHTML = categories.map(cat => `<button class="filter-btn ${category === cat ? 'active' : ''}" onclick="App.renderBlogPage('${cat}')">${cat}</button>`).join('');
                document.getElementById('blog-grid').innerHTML = postsHTML;

                this.navigateTo('page-blog-list');

                // // Inicializa ou atualiza o carrossel de destaques.
                new Swiper('.featured-swiper', { loop: true, slidesPerView: 1, spaceBetween: 20, autoplay: { delay: 4000 }, pagination: { el: '.swiper-pagination', clickable: true }, breakpoints: { 768: { slidesPerView: 2 } } });
            },

            // // Renderiza a página de detalhe de um post específico.
            renderPostDetailPage(postId) {
                const post = this.database.blogPosts.find(p => p.id === postId);
                if(!post) return; // Se o post não for encontrado, não faz nada.
                const relatedPosts = this.database.blogPosts.filter(p => p.category === post.category && p.id !== postId).slice(0, 2);
                
                const detailHTML = `
                    <section class="post-detail-section">
                        <div class="container">
                            <img src="${post.image}" alt="${post.title}" class="post-header-image">
                            <div class="post-detail-grid">
                                <article>
                                    <h1 class="post-title">${post.title}</h1>
                                    <p class="post-author">Por ${post.author}</p>
                                    <div class="post-content">${post.content}</div>
                                </article>
                                <aside class="post-sidebar">
                                    <h3 class="font-brand text-xl font-semibold mb-4">Relacionadas</h3>
                                    <div class="related-posts-container">
                                        ${relatedPosts.map(rp => this.createRelatedPostTemplate(rp)).join('') || '<p>Nenhuma notícia relacionada.</p>'}
                                    </div>
                                    <button class="back-to-blog-btn" onclick="App.renderBlogPage()">← Voltar ao Blog</button>
                                </aside>
                            </div>
                        </div>
                    </section>
                `;
                document.getElementById('page-post-detail').innerHTML = detailHTML;
                this.navigateTo('page-post-detail');
            },

            // // Funções de "template" que geram o HTML para cada componente.
            createBlogCardTemplate: post => `<div class="blog-card" onclick="App.openPreviewModal(${post.id})"><img src="${post.image}" class="blog-card-image"><div class="blog-card-content"><p class="blog-card-category">${post.category}</p><h3 class="blog-card-title">${post.title}</h3></div></div>`,
            createFeaturedPostTemplate: post => `<div class="swiper-slide"><div class="featured-slide-content" onclick="App.openPreviewModal(${post.id})"><img src="${post.image}" class="featured-slide-img"><div class="featured-slide-overlay"></div><div class="featured-slide-text"><h3 class="featured-slide-title">${post.title}</h3></div></div></div>`,
            createRelatedPostTemplate: post => `<div class="related-post-card" onclick="App.renderPostDetailPage(${post.id})"><img src="${post.image}" class="related-post-image"><div><h4 class="related-post-title">${post.title}</h4><p class="related-post-author">Por ${post.author}</p></div></div>`,

            // // Funções para abrir e fechar o modal de partilha.
            openModal(modalID) { document.getElementById(modalID).classList.add('active'); },
            closeModal(modalID) { document.getElementById(modalID).classList.remove('active'); },
            openPreviewModal(postId) {
                const post = this.database.blogPosts.find(p => p.id === postId);
                if(!post) return;
                document.getElementById('preview-modal-content').innerHTML = `
                    <img src="${post.image}" class="modal-preview-image">
                    <h3 class="modal-title">${post.title}</h3>
                    <p class="modal-preview-text">${post.content.substring(3, 100)}...</p>
                    <button class="btn btn-blue" onclick="App.renderPostDetailPage(${post.id})">Ler Notícia Completa</button>
                `;
                this.openModal('preview-modal');
            },
        };
        // // Inicia a aplicação quando a página estiver pronta.
        document.addEventListener('DOMContentLoaded', () => App.init());
    </script>
</body>
</html>
